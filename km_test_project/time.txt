Обсуждение проекта - 1

Торговая площадка

	Создание пользователей системы - 0,20

	Статусы сделки - 3,10

	Cумма коммиссии по умолчанию - 0,40

	Добавление расчетных счетов - 2,30

	Все предложения - 4

	Создание предложения - 1,50

	Создание сделки - 3

	Исправление вывода комиссии - 0,10

	Исправление добавления предложения - 0,20

	Сделки пользователя - 1,30 

	Сделка - 12, 16:00 - 17:30

	Выбор счёта для оплаты - 6:00

	Все сделки пользователя - 

	Подтверждение платежа - 2

		когда создавать платёж по сделке?

			нажал оплатить

			если баланс прошёл, то отправили запрос на платёж

			попросили код на почту

			банк отправил код

			на торг площадке показали страницу для ввода кода

			если код правильный, то начинает работать celery:

				запрос на старт транзакции

				в ответ ключ транзакции

				создание платежа по сделки

		создать форму

		Создать шаблон

		Создать вью

		подключить вью в админке

		сделать редирект после удачной проверки баланса

		вывести форму для ввода кода

		добавить во вьюху проверку формы

		если валидация формы прошла, то отправить код в api банк клиента

		если валидация кода на стороне api банк клиента прошла, то создать платёж по сделке и сказать пользователю, что платёж обрабатывается и отправить это все в celery

	Платёж

		payment

			deal_id

			key

			amount

		Отправили в банк код подтверждения

		Если код верный, то банк сгенерил ключ операции и отправил его торг площ

		Создали запись в таблице payment со сделкой, ключом и суммой

		Отправили celery задачу

Банк клиент
	
	Создание и настройка проекта - 0,40

	Аутентификация и валидация формата - 3

	Баланс клиента - 2,40

	Код подтверждения - 3,30

		торг площ попросила код на операцию

		банк сгенерил код, создал операцию с ключом, добавил туда код, пользователя и отправил код на почту

		пользователь ввёл и отправил банку

		банк проверил и если всё ок, то отправил ключ операции

		торг площ отправила ключ операции вместе с данными для платежа

		------------------------------------------------------------------------------------------------------------

		 

		код храниться в таблице с юзером

		запрос на генерацию кода

		сгенерировался, записался в базу, отправился юзеру на почту

		пользователь ввёл и отправил

		банк проверяет код

		если совпали коды, то провели операцию и установили поле код в null








	

	



