Оглавление

    Основные понятия

    Смена информации о дилере

    Перенос нового диллера с тестового сервера на боевой

Основные понятия

    Дилер - магазин, который торгует от лица korallmicro.

Смена информации о дилере

    Получаем информацию о дилере из системы Мегаплан. Обычно кто то пишет с просьбой поменять информацию о дилере.

    Идем на сайт www.korallmicro.ru

    Ищем и выбираем дилера.

    Находим информацию о дилере.

    Идем на боевой сервер с проектом. Как подключиться?

    Переходим в /application/config/subdomains

    Находим по имени дилера файл diller_name.ini.

    Открываем найденный файл.

    В этом файл находится информация о конкретном дилере.

    Меняем то, что нам нужно. (при изменении координат, проверять на соответствие с адресом)

        legal_adress - юридическое лицо

    Сохраняем файл.

    Проверяем обновления на сайте www.korallmicro.ru (из-за кэша может обновляться с задержкой, максимальное время обновления 15 минут)

    Отписываемся в Мегаплан

Перенос нового диллера с тестового сайта на боевой

    Переходим на demo.korallmicro.ru

    Должен произойти автоматический переход на тестовый сайт для конкретного дилера. Например http://gelendzhik.korallmicro.ru

    Идем на боевой сервер с проектом. Как подключиться?

    Переходим в application/config/subdomains

    Находим по имени дилера файл diller_name.ini.

    Открываем найденный файл.

    В этом файл находится информация о конкретном дилере.

    ...продолжение следует


----------------


Зайти на сервер 7.3 под пользователем root

    Править mcedit /etc/nginx/vhosts/korallmicro.ru

    Перенести нужный поддомен из тестовой зоны в боевую

    В терминале вбить команду nginx -t (проверить конфиг на наличие ошибок)

Зайти на сервер 7.41 под пользователем web

    Указать в конфиге дату подключения дилера (connection_date='31.12.9999') и перенести ini конфиг

    Убрать хост из демо application.ini

    Сменить пользователя на root

    Из mcedit /etc/nginx/sites-available/demo.korallmicro.ru  вырезать поддомен

    В mcedit /etc/nginx/sites-available/korallmicro.ru  вставить

    nginx -t (проветить конфиг на наличие ошибок)

    Добавить новый хост в боевой application.ini

Перезапустить nginx на 7.41 - service nginx reload

Перезапустить nginx на 7.3 - service nginx reload

Подождать минут 5 сброса кэша на сайте

На 100.52 в nginx-e

    ssh devel@10.10.100.52 pswd Wy....

    sudo mcedit /etc/nginx/sites-available/korallmicro.ru

    sudo nginx -t

    sudo service nginx reload