Октрываем проект в pycharm

Переходим в директорию с проектом 

	python create_bootstrap.py

	должен появиться bootstrap.py

	python bootstrap.py

	должно создасться виртуальное окружение magic-env

	должна появиться директория bin

Привязываем виртуальное окружение к проекту через pycharm

	File -> Settings -> Project -> Project interpreter -> шестеренка -> Show all -> + -> выбираем Existing environment -> /path/to/envs/name_env/bin/python

Устанавливаем зависимости

	bin/pip install -r requirements.txt

Устанавливаем нужные версии субд в docker контейнерах

	postgres 9.5

	mysql 5.7

	postgresql

		docker run \
		--name postgres_9.5 \
		-v ~/work/docker/volumes/postgres_9.5/config:/etc/postgresql \
		-v ~/work/docker/volumes/postgres_9.5/data:/var/lib/postgresql/data \
		-p 5432:5432 -e POSTGRES_PASSWORD=asdf1234 -d postgres:9.5

	mysql

		docker run \
		--name mysql_5.7 \
		-v ~/work/docker/volumes/mysql_5.7/config:/etc/mysql/conf.d \
		-v ~/work/docker/volumes/mysql_5.7/data:/var/lib/mysql \
		-p 3306:3306 \
		-e MYSQL_ROOT_PASSWORD=asdf1234 \
		-d mysql:5.7

Создаем в контейнерах нужные бд

	postgresql

		snr

		korallmicro	

	mysql

		magic - база проекта

		online_shop_info

		goods_office

Миграции

	Устанавливаем драйвер MySQLdb

		sudo apt-get update

		sudo apt-get install python-mysqldb

		pip install mysql

	Переходим в /magic/modules/configurator/admin.py и комментируем код на строках (152 - 157 включительно)

	Находясь в корневой директории с проектом в консоль bin/manage migrate

	В /magic/modules/configurator/admin.py убираем комментарии со строк (152 - 157 включительно)

Дамп

	Делать через mysql workbench

	При заливки дампов lin-web-dp@korallmicro.pgsql и lin-web-dp@snr.pgsql будет ошибка pg_restore: [archiver (db)] could not execute query: ERROR:  role "korallmicro" does not exist

	Решение: создаем роль korallmicro и заливаем заново

	Удостовериться, что в базе magic (mysql) есть таблица django_site со значениями (1, example.com, example.com)

	На 11.02.2019 используются базы:

		default, 1c_8_raw, istore, korallmicro, sales_base_models, snr_new 

Файл настроек

	Переходим в имя_проекта/conf, открываем файл settings_local.py.template, копируем все

	В имя_проекта/conf созаем файл settings_local.py и вставляем все скопированное из settings_local.py.template

Вопросы

	Нужен ли кусок в /magic/modules/configurator/admin.py на строке 151? (Создаем формы конфигураторов для тестов)







