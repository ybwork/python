Оглавление

	Тэгирование кэша

Тэгирование кэша

	При редактировании данных, необходимо удалить также и все кэши, содержащие данные этой модели. 

		Например, при редактировании продукта, который присутствует на закэшированной главной странице компании, требуется инвалидировать и ее кэш тоже. 

		Или например обновляя фамилию пользователя, мы должны также удалить все кэши страниц его постов, на которых присутствуют обновленные данные.

	Обычно за инвалидацию кэша отвечает паттерн Observer, или его разновидность - паттерн Multicast. 

	Но даже в этом случае механизмы инвалидации получаются слишком сложными.

	И тут на выручку приходит тегирование кэша, т.е. прошивание кэша метками. 

		Например, кэш главной страницы может быть прошит тегом product.id:635. 

		А все посты пользователя могут быть прошиты меткой user.id:10. 

		Коллекции можно кэшировать составным тегом, состоящим из критериев выборки, например type.id:1;category.id:15;region.id:239.

		Теперь достаточно инвалидировать метку, чтобы все зависимые кэши автоматически инвалидировались.