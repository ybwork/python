Оглавление

	Вид-тип

	Карточка товара

	Слепок карточки товара

	Картинки карточки товара

	Подтверждение карточек товара

	Статьи

	Атрибуты

	Шаблоны

	Шаблон представления для Интернет-магазин "КораллМикро"

	Шаблон представления для Интернет-магазин "SNR"

	Карусель

	Группы рассылки

Вид-тип

	Оба этих термина (вид и тип) относятся к продукту.

	Вид - это, что за продукт. Например бумага.

	Тип - это, какого типа этот продукт. Например бумага может быть копировальная, фото бумага, копировальная и т.д.

	Исходя из вышесказанного получается например такой Вид-тип: Бумага-Копировальная.

Карточка товара

	Есть интернет магазины korallmicro и snr.

	У продукта представленного в этих магазинах может быть описание. Например произовдитель, модель, вес, размеры и т.д.

	Так же у продукта могут быть фотографии.

	Карточка товара это и есть тот раздел, который отвечает за создание описания и фотографий для продуктов. 

	Карточка товара создаётся и заполняется менеджерами.

	Более детальная информация:

		Описан в модели ProductCard.

		Сохраняется в базу magic, таблица cards_productcard.

		На локальной машине этот процесс можно посмотреть по адресу http://localhost:8000/cards/productcard/

Слепок карточки товара

	Есть карточка товара.

	У карточки товара есть слепок.

	Слепок это запись в другой таблице.

	Слепок карточки товара формируется после того, как карточка помечена, как "проверена".

	Интернет магазины korallmicro и snr берут данные для карточки товара напрямую из слепков.

	Более детальная информация:

		Описан в модели ProductCardDescription.

		Сохраняется в базу magic, таблица cards_productcarddescription.

		Формирование происходит в фоне с помощью celery и таскa update_description_via_change_card.

Картинки карточки товара

	У карточки товара может не быть картинок при условии, что стоит галочка в поле "Не валидные изображения".

	Если не стоит галочка в поле "Не валидные изображения", то у карточки товара должно быть минимум одна, главная картинка.

	Главная картинка - это картинка с индексом 0.

	При добавлении картинок им задаются индексы.

	Обязательно одна из картинок должна иметь индекс 0 и индексы не должны дублироваться.

	С помощью индексов можно задать порядок картинок.

	В заданном порядке эти картинки будут отображаться на у каждого продукта на сайтах korallmicro и snr.

Подтверждение карточек товара

	Карточки товара создает и заполняет специально обученный человек.

	Такой же специально обученный человек проверяет их и решает валидная карточка товара или нет.

	Если валидная, то карточка товара помечается, как подтвержденная.

	Можно подтверждать пачками, а можно по одной.

	После подтверждения в фоне происходит ряд действий (выгружаются картинки на CDN, создаётся слепок).

	Если в фоне все задачи завершились успешно, то у карточки/карточек обновляется параметр date_formed_description (в это поле попадает текущая дата и время).

	Только после обновления параметра date_formed_description карточка товара считается полностью подтвержденной.

Статьи

	Статьи отображаются на сайтах korallmicro и snr.

	Для написания статьи пользователи magic используют tinymce.

	Иногда возникает потребность изменить какие-либо св-ва редактора, например ширину окна.

	Это можно сделать использовав настройки tinymce в файле settings.py (см. TINYMCE_DEFAULT_CONFIG)

Атрибуты

	Атрибуты - это св-ва вида-типа. Например у вида-типа "Бумага-Копировальная" могут быть св-ва "Цвет бумаги", "Формат листов", "Плотность" и т.д.

Шаблоны

	У каждой карточки товара есть вид-тип.

	К каждому виду-типу можно привязать шаблон.

	У каждого шаблона есть дерево.

	В дерево шаблона можно добавлять группы.

	Группы могут быть вложены в другие группы.

	Группа "Основные характеристики" является группой по умолчанию и всегда добавлена в дерево.

	К каждой группе можно добавить атрибуты.

	При удалении атрибута из дерева шаблона посылается сигнал после которого карточки товара у которых этот шаблон помечаются, как требующие доработки. ВНИМАНИЕ! Данное поведение временно убрали на production.

Шаблон представления для Интернет-магазин "КораллМикро"

	Фомируется на основе шаблона вида-типа и его атрибутов.

	Независимо от указанных в дереве шаблона атрибутов добавляется 2 обязательных атрибута (бренд и страна изготовитель).

Шаблон представления для Интернет-магазин "SNR"

	Фомируется на основе шаблона вида-типа и его атрибутов.

	Независимо от указанных в дереве шаблона атрибутов добавляется 2 обязательных атрибута (бренд и страна изготовитель).

Карусель

	В интеренет-магазинах snr и korallmicro есть карусель с рекламными банерами (см. https://snr.ru и https://www.korallmicro.ru/).

	В magic можно добавить новую карусель и порядок её следования при отображении на snr и korallmicro.

	Так же у карусели есть срок действия.

	Если срок действия карусели истек, то она помечается как не опубликованная (is_public=False).

	Это происходит с помощью таска в фоне (см. таск unpublicate_carousel_items).

Группы рассылки

    При определенных условиях пользователям и разработчикам системы приходят уведомления. Для разных уведомлений существуют определенные группы рассылки.

    Здесь будет описано какие существуют группы рассылки, кто в них находится и в каких случаях туда приходят письма.

    ADMINS

        В эту группу входят ответственные за поддержку системы.

        Сюда приходят сообщения после логгирования (уровень ERROR) и при возникновении других ошибок.

        Смотреть вызовы logger.error, mail_admins, send_html_email в методе to_dict модели InfoCatalog.

        На 30.04.2019 в этой группе:

            alexandr_angilenko@km-union.ru

            senchenko_vs@km-union.ru

            kaduk_ia@km-union.ru

    MANAGERS

        В эту группу входят управляющие этой системы.

        Смотреть вызов метода mail_managers.

        На 30.04.2019 в этой группе:

            alexander_glubokov@km-union.ru

            vlad_vaholsky@km-union.ru

    KMCLIENT_NOTIFICATION_EMAILS

        Судя по коду нигде не используется.

    SYSTEM_NOTIFICATION_EMAIL_GROUPS

        В эту группу входят ответственные за поддержку системы.

        Сюда приходят сообщения о различных процессах работы системы, которые происходят в фоне. Например "формирование фильтров на сайт" или "появились карточки товара с новыми шаблонами" и т.п.

        Для более подробной инфы смотреть таски в приложениях card, catalog, istore, korallmicro, ones.

        На 30.04.2019 в этой группе:

            alexandr_angilenko@km-union.ru

            senchenko_vs@km-union.ru

            kaduk_ia@km-union.ru

    FRIENDS_FROM_1C_EMAIL_GROUPS

        Судя по коду нигде не используется.

    FRIENDS_FROM_INTEGRATOR_EMAIL_GROUPS

        Судя по коду нигде не используется.

    CONTENT_MANAGER_NOTIFICATION_EMAIL_GROUPS

        В эту группу входят контент менеджеры различных магазинов.

        Сюда приходят сообщения о различных процессах работы системы, которые происходят в фоне. Например "формирование фильтров на сайт" или "появились карточки товара с новыми шаблонами" и т.п.

        Для более подробной инфы смотреть таски в приложениях card, catalog, istore, korallmicro, ones.

        На 30.04.2019 в этой группе:

            korallmicro - alexander_glubokov@km-union.ru, vlad_vaholsky@km-union.ru

            istore - alexander_glubokov@km-union.ru, Azevich_EM@km-union.ru

            snr_new - alexander_glubokov@km-union.ru, vlad_vaholsky@km-union.ru

    REVIEW_CHECKER_NOTIFICATION_EMAIL_GROUPS

        В эту группу входят проверяющие отзывы на товары.

        Сюда приходят письма, когда пользователь оставил отзыв о товара.

        На 30.04.2019 в этой группе:

            aleksey_lomakin@km-union.ru

    OFFERS_CHECKER_NOTIFICATION_EMAIL_GROUPS

        В эту группу входят ответственные за выгодные предложения.

        Сюда приходят письма об существующих выгодных предложениях и сроке их действия.

        На 30.04.2019 в этой группе:

            folvarkov@mail.ru

            alexandrcms@gmail.com

            skvooz@gmail.com

    UNIQUE_FULL_ALIAS_CHECKER_NOTIFICATION_EMAIL_GROUPS

        В эту группу входят ответственные за каталогом.

        Сюда приходят письма, когда происходит ошибка при синхронизации с 1С для сайта.

        На 30.04.2019 в этой группе:

            alexandrcms@gmail.com

            aleksey_lomakin@km-union.ru

            alexander_glubokov@km-union.ru

    ACTUAL_CHECKER_NOTIFICATION_EMAIL_GROUPS

        В эту группу входят ответственные за смену актуальности карточки товара.

        Сюда приходят письма, когда изменился параметр is_actual у карточки товара.

        Это происходит в фоне, поэтому смотреть в тасках приложения cards.

        На 30.04.2019 в этой группе:

            svetlana_koroleva@km-union.ru

            tatyana_zakharova@km-union.ru

    CONFIGURATOR_ANALITICS

        В эту группу входят ответственные за проверку статистики по конфигуратору.

        На 30.04.2019 скорее всего его выпилили.

        На 30.04.2019 в этой группе:

            fastunova_va@km-union.ru

    SITE_PRODUCTS_REPORT_EMAILS

        В эту группу входят ответственные за проверку отчетов о карточках товаров.

        Сюда приходят письма, при формировании отчетов о карточках товаров.

        Отчеты формируются в фоне. Смотреть таски приложения cards.

        На 30.04.2019 в этой группе:

            alexander_glubokov@km-union.ru

            abakarov_ag@km-union.ru

            angilenko_aa@km-union.ru

            senchenko_vs@km-union.ru

            kaduk_ia@km-union.ru

    CRITICAL_ERROR_EMAIL_GROUPS

        В эту группу входят ответственные за управление и поддержку системы.

        Сюда приходят письма, когда возникают критические для работы системы ошибки.

        Судя по коду это: "Ошибка обновления данных на стороне magic после анализа существующих объектов."

        На 30.04.2019 в этой группе:

            vlad_vaholsky@km-union.ru

            alexander_glubokov@km-union.ru

            aleksey_lomakin@km-union.ru

            malashikhin_da@km-union.ru

            mihail_shinkarenko@km-union.ru

            alexandr_angilenko@km-union.ru

            senchenko_vs@km-union.ru

            kaduk_ia@km-union.ru


	