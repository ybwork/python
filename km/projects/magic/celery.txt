Есть системы:
	1C - основной источник данных
	magic - каталог товаров и выгодные предложения
	dp/sdp - цены и остатки
	kmclient - с дилерами


Синхронизации:
	синхронизация 1С в 1C_8_RAW (вообще есть полная и частичная синхронизация)
	в magic запускается синхронизация с базой 1С (тоже есть OnesSync (sync_db) и SimpleOnesSync (simple_ones_sync) )
	в magic запускается синхронизация каталогов на сайты ( sync_shop(type) - 'snr_new', 'korallmicro', 'istore' )
	в magic запускается синхронизация на сайты (sync_snr, sync_korallmicro, sync_istore): каталоги и товары, выгодные и теги, настройки отображения на сайте, новинки
	в dp/sdp запускается синхронизация цен и остатков


синхронизации (касаемся magic и dp, для сайтов):
	magic:
		sync_db				синхронизация с 1с
		sync_shop			синхронизация каталогов
		sync_korallmicro
		sync_filter_korallmicro
	dp:
		sync				остатки и цены для кораллмикро


---------------------------

синхронизация в magic (запустит всю цепочку, включая dp и up), если настроен брокер (бросить сигнал):

# запуск полной синхронизации
bin/celery call -A app_celery full_ones_sync_send_signal --queue=default

# запуск упрощенной синхронизации
bin/celery call -A app_celery simple_ones_sync_send_signal --queue=default



---------------------------


синхронизация руками (запуск следующего таска после того, как отработает предыдущий):

# magic:

	Закоментить в /home/oem/work/projects/magic/modules/ones/tasks/main.py

        send_html_email(
            u'Ошибка при синхронизации ones, проблемы с ценой',
            u'\n'.join(msg),
            settings.SYSTEM_NOTIFICATION_EMAIL_GROUPS + users_emails,
            html_message=u'<h1><a href="{0}">'
                         u'Страница для редактирования</a></h1>'
                         u'<p>{1}</p>'.format(
                settings.BASE_URL + reverse(
                    'admin:ones_prices_changelist'),
                u'<br/>'.join(msg)
            )
        )

# полная синхронизация с 1С
bin/celery call -A app_celery sync_db --queue=system
# синхронизация каталогов на сайт
bin/celery call -A app_celery sync_shop --queue=system --args='["korallmicro"]'
# синхронизация на сайт кораллмикро
bin/celery call -A app_celery sync_korallmicro --queue=system
# синхронизация фильтров для коралла
bin/celery call -A app_celery sync_filter_korallmicro --queue=system

# синхроризация каталогов для снр
bin/celery call -A app_celery sync_shop --queue=system --args='["snr_new"]'
# синхронизация на сайт снр
bin/celery call -A app_celery sync_snr_new --queue=system

# синхронизация каталогов для istore
bin/celery call -A app_celery sync_shop --queue=system --args='["istore"]'
# синхронизация на сайт istore
bin/celery call -A app_celery sync_istore --routing-key=system
# false - не использовать доверительный интервал (иначе при больших расхождениях в каталоге и товарах отбивает)
# bin/celery call -A app_celery sync_shop --queue=system --args='["istore", false]'

# если запускать на тестовом, все в очередь default
bin/celery call -A app_celery sync_db --queue=default
...


# dp:
bin/celery call -A app_celery sync --queue=default


---------------------------

# упрощенные синки:

# magic
bin/celery call -A app_celery simple_ones_sync --queue=system

# dp/sdp
bin/celery -A app_celery call simple_sync --routing-key=sync


---------------------------


Еще полезные таски:


# отчет по кораллу
bin/celery call -A app_celery send_report_korallmicro --queue=default


# можно выполнить полную синхронизацию фильтров (через шелл):
In [1]: from snr.tasks import sync_filter_attrs
In [2]: sync_filter_attrs()



# magic, синхронизация акций:
bin/celery -A app_celery call ones_sync_offers --routing-key=system


# dp/sdp, синхронизация акций:
bin/celery -A app_celery call sync_apply_ones_action_prices --routing-key=ones_actions


--------------------------------------------------------------------------------



Проверить ЯМ:


Логин/пароль:

korallmicro:
------------
MarketOnlineKM
HjcnjdRjhfkkvbrhj

snr:
----
MarketOnlineSNR
RhfcyjlfhCYH



локальный:
http://dev-1.korallmicro.ru/ajax/getymlnew?yandex_market_uuid=f809972a-c859-46be-a978-5da82c87f967

тестовый:
http://dev-www.korallmicro.ru/ajax/getymlnew?yandex_market_uuid=f809972a-c859-46be-a978-5da82c87f967


боевой:
http://www.korallmicro.ru/ajax/getyml?yandex_market_uuid=f809972a-c859-46be-a978-5da82c87f967
http://www.korallmicro.ru/ajax/getymlnew?yandex_market_uuid=f809972a-c859-46be-a978-5da82c87f967
	без дат доставки
https://snr.ru/yandex_market/8319d51f-98d2-4b2a-992d-a2ab5461effa/www.yml


фид retail rocket:
http://www.korallmicro.ru/retail_rocket_feed.xml