Оглавление

	Философия дизайна

	Настройки

	Основные параметры настроек

	Развертывание (nginx + gunicorn + django + postgresql)

Философия дизайна

	Фундаментальная основа стека Django - это слабая связанность.

		Отдельным слоям фреймворка не следует “знать” друг о друге, если в этом нет острой необходимости.

		Например, система шаблонов ничего не знает о Web запросах, а базу данных не интересует, как эти данные представлены.

		Django поставляется с пакетом приложений, который представляет из себя кусочки, для удобства независимые настолько, насколько это возможно.

	Меньше кода

		Приложения Django должны использовать настолько мало кода, насколько возможно, следует избегать шаблонных кусков.

	Не повторяйтесь (DRY)

		Каждая отдельная концепция и/или кусок данных следует хранить в одном и лишь одном месте. Избыточность - плохо. Нормализация - хорошо.

	Явное лучше чем неявное

		Это значит, что Django не должен творить слишком много магии.

	Эффективность SQL

		SQL запросы должны выполняться как можно реже, и должны быть оптимизированы.

	Всё должно быть на своих местах

		Например вся информация, описывающая модель и логику ее работы  определена в классе модели.

Настройки

	Файл настроек содержит полную конфигурацию установленного проекта и называется settings.py

	Файл настроек - это просто модуль python с переменными модуля.

	Можно динамически определять настройки, используя обычный синтаксис python.

		settings.MY_SETTING.append['new_param']

	Можно импортировать значения из других файлов настроек.

		from settings_local import *

	Можно явно указать какие настройки должны использоваться.

		export DJANGO_SETTINGS_MODULE=mysite.settings
		django-admin runserver

		----

		django-admin runserver --settings=mysite.settings

	Для настройки на сервере (Apache и mod_wsgi) нужно указать WSGI-приложению какой файл с настройками использовать.

		import os
		os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

	Проект Django не обязан определять какие-либо настройки, если в этом нет необходимости.

		Каждая настройка содержит значение по умолчанию.

		Эти значния можно найти в модуле django/conf/global_settings.py

		Можно сделать так, чтобы настройки загружались по умолчанию не из модуля django/conf/global_settings.py

	Импорт настроек

		Правильно импортировать так:

			from django.conf import settings

	Вам не следует менять настройки в процессе работы приложения.

	Безопасность

		Файл настроек содержит конфиденциальную информацию, например, как пароль к базе данных, вы должны хранить его в безопасности. 

		Например, поменяйте права доступа к файлу, чтобы только вы и пользователь веб-сервера имел к нему доступ. 

		Это особенно важно для хостингов с общим окружением.

	Добавление собственных настроек

		Названия настроек должны быть в верхнем регистре.

		Не изобретайте заново существующие настройки.

Основные настройки

	BASE_DIR - 

	SECRET_KEY 

		Исользуется для различных механизмов защиты django приложений.

		Используется для криптографической подписи, если не указан другой ключ.

		Используется для всех сессий, кроме django.contrib.sessions.backends.cache.

		Без него проект не запуститься.

		Генерится автоматов при создании проекта.

		Не используется для хранения пароля пользователей и при смене они не будут сломаны.

	DEBUG

		Включает/выключает режим отладки.

		Не использовать True на боевом сервере.

		При DEBUG равном False, необходимо правильно указать ALLOWED_HOSTS, а иначе все запросы будут возвращать Bad Request (400).

	ALLOWED_HOSTS

		Список хостов/доменов, для которых может работать текущий сайт.

		Это сделано для безопасности, чтобы обезопасить от внедрения в куки или письма для сброса пароля ссылок на сторонний сайт подменив HTTP заголовок Host.

		Проверка обычно нужна только на боевом сервере.

	INSTALLED_APPS

		Здесь список всех приложений Django, используемых в проекте.

		Названия приложения должны быть уникальны.

		Если несколько приложений содержат разные версии одних и тех же ресурсов (шаблоны, статические файлы, команды, файлы перевода), будут использоваться ресурсы из приложения, которое указано выше.

Развертывание



	